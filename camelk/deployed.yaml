apiVersion: camel.apache.org/v1
kind: Integration
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"camel.apache.org/v1","kind":"Integration","metadata":{"annotations":{},"creationTimestamp":"2022-08-09T14:55:41Z","generation":5,"labels":{"app.kubernetes.io/created-by":"bridge-fleet-shard-operator","app.kubernetes.io/managed-by":"bridge-fleet-shard-operator"},"name":"ob-camel-b20329a0-9d94-4e7d-aa10-a5287cd979c5","namespace":"ob-1608dc1f-4139-49c5-ae22-afe73ed807d7","resourceVersion":"645437","uid":"12c5e14b-b09a-4061-858b-4fa4a5af7389"},"spec":{"flows":[{"from":{"steps":[{"to":"log:info?showAll=true\u0026multiLine=true"},{"unmarshal":{"json":{}}},{"to":"log:info?showAll=true\u0026multiLine=true"},{"choice":{"otherwise":{"steps":[{"marshal":{"json":{}}},{"to":{"parameters":{"brokers":"brokerUrl:443","consumersCount":1,"groupId":"kafkaGroup","maxPollRecords":5000,"saslJaasConfig":"org.apache.kafka.common.security.plain.PlainLoginModule required username='clientId' password='password';","saslMechanism":"PLAIN","securityProtocol":"SASL_SSL","seekTo":"beginning"},"uri":"kafka:lmolteni-prcs-b20329a0-9d94-4e7d-aa10-a5287cd979c5-errorAction"}}]},"when":[{"simple":"${body[nutritions][sugar]} \u003c= 5","steps":[{"log":{"message":"++++- Lesser equal than 5 ${body}"}},{"marshal":{"json":{}}},{"to":{"parameters":{"brokers":"brokerUrl:443","consumersCount":1,"groupId":"kafkaGroup","maxPollRecords":5000,"saslJaasConfig":"org.apache.kafka.common.security.plain.PlainLoginModule required username='clientId' password='password';","saslMechanism":"PLAIN","securityProtocol":"SASL_SSL","seekTo":"beginning"},"uri":"kafka:lmolteni-prcs-b20329a0-9d94-4e7d-aa10-a5287cd979c5-slackAction1"}},{"setBody":{"simple":"${null}"}}]},{"simple":"${body[nutritions][sugar]} \u003e 5 \u0026\u0026 ${body[nutritions][sugar]} \u003c= 10","steps":[{"log":{"message":"++++- between 5 and 10 goes to http ${body}"}},{"marshal":{"json":{}}},{"to":{"parameters":{"brokers":"brokerUrl:443","consumersCount":1,"groupId":"kafkaGroup","maxPollRecords":5000,"saslJaasConfig":"org.apache.kafka.common.security.plain.PlainLoginModule required username='clientId' password='password';","saslMechanism":"PLAIN","securityProtocol":"SASL_SSL","seekTo":"beginning"},"uri":"kafka:lmolteni-prcs-b20329a0-9d94-4e7d-aa10-a5287cd979c5-httpAction"}},{"setBody":{"simple":"${null}"}}]}]}}],"uri":"rest:POST:example?exchangePattern=InOnly"}}]},"status":{"conditions":[{"firstTruthyTime":"2022-08-09T15:08:41Z","lastTransitionTime":"2022-08-09T15:08:41Z","lastUpdateTime":"2022-08-09T15:08:41Z","message":"kit-cbp5tpus1hn9g5luenng","reason":"IntegrationKitAvailable","status":"True","type":"IntegrationKitAvailable"},{"lastTransitionTime":"2022-08-09T15:08:42Z","lastUpdateTime":"2022-08-09T15:08:42Z","message":"different controller strategy used (deployment)","reason":"CronJobNotAvailableReason","status":"False","type":"CronJobAvailable"},{"firstTruthyTime":"2022-08-09T15:08:42Z","lastTransitionTime":"2022-08-09T15:08:42Z","lastUpdateTime":"2022-08-09T15:08:42Z","message":"deployment name is ob-camel-b20329a0-9d94-4e7d-aa10-a5287cd979c5","reason":"DeploymentAvailable","status":"True","type":"DeploymentAvailable"},{"firstTruthyTime":"2022-08-09T15:08:42Z","lastTransitionTime":"2022-08-09T15:08:42Z","lastUpdateTime":"2022-08-09T15:08:42Z","message":"ob-camel-b20329a0-9d94-4e7d-aa10-a5287cd979c5(http/80) -\u003e integration(http/8080)","reason":"ServiceAvailable","status":"True","type":"ServiceAvailable"},{"lastTransitionTime":"2022-08-09T15:08:42Z","lastUpdateTime":"2022-08-09T15:08:42Z","message":"no host or service defined","reason":"IngressNotAvailable","status":"False","type":"ExposureAvailable"},{"firstTruthyTime":"2022-08-09T15:08:43Z","lastTransitionTime":"2022-08-09T15:08:43Z","lastUpdateTime":"2022-08-09T15:08:43Z","message":"1/1 ready replicas","reason":"DeploymentReady","status":"True","type":"Ready"}],"dependencies":["camel:core","camel:jackson","camel:kafka","camel:log","camel:rest","mvn:org.apache.camel.k:camel-k-runtime","mvn:org.apache.camel.quarkus:camel-quarkus-yaml-dsl"],"digest":"vJjfNnIM1YAekOscbdOxbxkPCmTyP188mSCczz_YiO7I","generatedSources":[{"content":"- from:\n    steps:\n    - to: log:info?showAll=true\u0026multiLine=true\n    - unmarshal:\n        json: {}\n    - to: log:info?showAll=true\u0026multiLine=true\n    - choice:\n        otherwise:\n          steps:\n          - marshal:\n              json: {}\n          - to:\n              parameters:\n                brokers: brokerUrl:443\n                consumersCount: 1\n                groupId: kafkaGroup\n                maxPollRecords: 5000\n                saslJaasConfig: org.apache.kafka.common.security.plain.PlainLoginModule\n                  required username='clientId'\n                  password='password';\n                saslMechanism: PLAIN\n                securityProtocol: SASL_SSL\n                seekTo: beginning\n              uri: kafka:lmolteni-prcs-b20329a0-9d94-4e7d-aa10-a5287cd979c5-errorAction\n        when:\n        - simple: ${body[data][nutritions][sugar]} \u003c= 5\n          steps:\n          - log:\n              message: ++++- Lesser equal than 5 ${body}\n          - marshal:\n              json: {}\n          - to:\n              parameters:\n                brokers: brokerUrl:443\n                consumersCount: 1\n                groupId: kafkaGroup\n                maxPollRecords: 5000\n                saslJaasConfig: org.apache.kafka.common.security.plain.PlainLoginModule\n                  required username='clientId'\n                  password='password';\n                saslMechanism: PLAIN\n                securityProtocol: SASL_SSL\n                seekTo: beginning\n              uri: kafka:lmolteni-prcs-b20329a0-9d94-4e7d-aa10-a5287cd979c5-slackAction1\n          - setBody:\n              simple: ${null}\n        - simple: ${body[data][nutritions][sugar]} \u003e 5 \u0026\u0026 ${body[data][nutritions][sugar]}\n            \u003c= 10\n          steps:\n          - log:\n              message: ++++- between 5 and 10 goes to http ${body}\n          - marshal:\n              json: {}\n          - to:\n              parameters:\n                brokers: brokerUrl:443\n                consumersCount: 1\n                groupId: kafkaGroup\n                maxPollRecords: 5000\n                saslJaasConfig: org.apache.kafka.common.security.plain.PlainLoginModule\n                  required username='clientId'\n                  password='password';\n                saslMechanism: PLAIN\n                securityProtocol: SASL_SSL\n                seekTo: beginning\n              uri: kafka:lmolteni-prcs-b20329a0-9d94-4e7d-aa10-a5287cd979c5-httpAction\n          - setBody:\n              simple: ${null}\n    uri: rest:POST:example?exchangePattern=InOnly\n","name":"camel-k-embedded-flow.yaml"}],"image":"10.96.37.170/default/camel-k-kit-cbp5tpus1hn9g5luenng@sha256:b5287e016f29f5eb5845cb7e55e939032e4ce2ea3b24542cb32568d5fafb1370","integrationKit":{"name":"kit-cbp5tpus1hn9g5luenng","namespace":"default"},"lastInitTimestamp":"2022-08-09T15:08:41Z","phase":"Running","profile":"Kubernetes","replicas":1,"runtimeProvider":"quarkus","runtimeVersion":"1.13.0","selector":"camel.apache.org/integration=ob-camel-b20329a0-9d94-4e7d-aa10-a5287cd979c5","version":"1.9.2"}}
  creationTimestamp: "2022-08-09T14:55:41Z"
  generation: 6
  labels:
    app.kubernetes.io/created-by: bridge-fleet-shard-operator
    app.kubernetes.io/managed-by: bridge-fleet-shard-operator
  name: ob-camel-b20329a0-9d94-4e7d-aa10-a5287cd979c5
  namespace: ob-1608dc1f-4139-49c5-ae22-afe73ed807d7
  resourceVersion: "647781"
  uid: 12c5e14b-b09a-4061-858b-4fa4a5af7389
spec:
  flows:
  - from:
      steps:
      - to: log:info?showAll=true&multiLine=true
      - unmarshal:
          json: {}
      - to: log:info?showAll=true&multiLine=true
      - choice:
          otherwise:
            steps:
            - marshal:
                json: {}
            - to:
                parameters:
                  brokers: brokerUrl:443
                  consumersCount: 1
                  groupId: kafkaGroup
                  maxPollRecords: 5000
                  saslJaasConfig: org.apache.kafka.common.security.plain.PlainLoginModule
                    required username='clientId'
                    password='password';
                  saslMechanism: PLAIN
                  securityProtocol: SASL_SSL
                  seekTo: beginning
                uri: kafka:lmolteni-prcs-b20329a0-9d94-4e7d-aa10-a5287cd979c5-errorAction
          when:
          - simple: ${body[data][nutritions][sugar]} <= 5
            steps:
            - log:
                message: ++++- Lesser equal than 5 ${body}
            - marshal:
                json: {}
            - to:
                parameters:
                  brokers: brokerUrl:443
                  consumersCount: 1
                  groupId: kafkaGroup
                  maxPollRecords: 5000
                  saslJaasConfig: org.apache.kafka.common.security.plain.PlainLoginModule
                    required username='clientId'
                    password='password';
                  saslMechanism: PLAIN
                  securityProtocol: SASL_SSL
                  seekTo: beginning
                uri: kafka:lmolteni-prcs-b20329a0-9d94-4e7d-aa10-a5287cd979c5-slackAction1
            - setBody:
                simple: ${null}
          - simple: ${body[data][nutritions][sugar]} > 5 && ${body[data][nutritions][sugar]} <=
              10
            steps:
            - log:
                message: ++++- between 5 and 10 goes to http ${body}
            - marshal:
                json: {}
            - to:
                parameters:
                  brokers: brokerUrl:443
                  consumersCount: 1
                  groupId: kafkaGroup
                  maxPollRecords: 5000
                  saslJaasConfig: org.apache.kafka.common.security.plain.PlainLoginModule
                    required username='clientId'
                    password='password';
                  saslMechanism: PLAIN
                  securityProtocol: SASL_SSL
                  seekTo: beginning
                uri: kafka:lmolteni-prcs-b20329a0-9d94-4e7d-aa10-a5287cd979c5-httpAction
            - setBody:
                simple: ${null}
      uri: rest:POST:example?exchangePattern=InOnly
status:
  conditions:
  - firstTruthyTime: "2022-08-09T15:11:03Z"
    lastTransitionTime: "2022-08-09T15:11:03Z"
    lastUpdateTime: "2022-08-09T15:11:03Z"
    message: kit-cbp5tpus1hn9g5luenng
    reason: IntegrationKitAvailable
    status: "True"
    type: IntegrationKitAvailable
  - lastTransitionTime: "2022-08-09T15:11:03Z"
    lastUpdateTime: "2022-08-09T15:11:03Z"
    message: different controller strategy used (deployment)
    reason: CronJobNotAvailableReason
    status: "False"
    type: CronJobAvailable
  - firstTruthyTime: "2022-08-09T15:11:03Z"
    lastTransitionTime: "2022-08-09T15:11:03Z"
    lastUpdateTime: "2022-08-09T15:11:03Z"
    message: deployment name is ob-camel-b20329a0-9d94-4e7d-aa10-a5287cd979c5
    reason: DeploymentAvailable
    status: "True"
    type: DeploymentAvailable
  - firstTruthyTime: "2022-08-09T15:11:03Z"
    lastTransitionTime: "2022-08-09T15:11:03Z"
    lastUpdateTime: "2022-08-09T15:11:03Z"
    message: ob-camel-b20329a0-9d94-4e7d-aa10-a5287cd979c5(http/80) -> integration(http/8080)
    reason: ServiceAvailable
    status: "True"
    type: ServiceAvailable
  - lastTransitionTime: "2022-08-09T15:11:03Z"
    lastUpdateTime: "2022-08-09T15:11:03Z"
    message: no host or service defined
    reason: IngressNotAvailable
    status: "False"
    type: ExposureAvailable
  - firstTruthyTime: "2022-08-09T15:11:06Z"
    lastTransitionTime: "2022-08-09T15:11:06Z"
    lastUpdateTime: "2022-08-09T15:11:06Z"
    message: 1/1 ready replicas
    reason: DeploymentReady
    status: "True"
    type: Ready
  dependencies:
  - camel:core
  - camel:jackson
  - camel:kafka
  - camel:log
  - camel:rest
  - mvn:org.apache.camel.k:camel-k-runtime
  - mvn:org.apache.camel.quarkus:camel-quarkus-yaml-dsl
  digest: vmV5Enpg7fZH3iXGloS26G3EnXuvG_XAdtvsxU86aCos
  generatedSources:
  - content: |
      - from:
          steps:
          - to: log:info?showAll=true&multiLine=true
          - unmarshal:
              json: {}
          - to: log:info?showAll=true&multiLine=true
          - choice:
              otherwise:
                steps:
                - marshal:
                    json: {}
                - to:
                    parameters:
                      brokers: brokerUrl:443
                      consumersCount: 1
                      groupId: kafkaGroup
                      maxPollRecords: 5000
                      saslJaasConfig: org.apache.kafka.common.security.plain.PlainLoginModule
                        required username='clientId'
                        password='password';
                      saslMechanism: PLAIN
                      securityProtocol: SASL_SSL
                      seekTo: beginning
                    uri: kafka:lmolteni-prcs-b20329a0-9d94-4e7d-aa10-a5287cd979c5-errorAction
              when:
              - simple: ${body[nutritions][sugar]} <= 5
                steps:
                - log:
                    message: ++++- Lesser equal than 5 ${body}
                - marshal:
                    json: {}
                - to:
                    parameters:
                      brokers: brokerUrl:443
                      consumersCount: 1
                      groupId: kafkaGroup
                      maxPollRecords: 5000
                      saslJaasConfig: org.apache.kafka.common.security.plain.PlainLoginModule
                        required username='clientId'
                        password='password';
                      saslMechanism: PLAIN
                      securityProtocol: SASL_SSL
                      seekTo: beginning
                    uri: kafka:lmolteni-prcs-b20329a0-9d94-4e7d-aa10-a5287cd979c5-slackAction1
                - setBody:
                    simple: ${null}
              - simple: ${body[nutritions][sugar]} > 5 && ${body[nutritions][sugar]} <=
                  10
                steps:
                - log:
                    message: ++++- between 5 and 10 goes to http ${body}
                - marshal:
                    json: {}
                - to:
                    parameters:
                      brokers: brokerUrl:443
                      consumersCount: 1
                      groupId: kafkaGroup
                      maxPollRecords: 5000
                      saslJaasConfig: org.apache.kafka.common.security.plain.PlainLoginModule
                        required username='clientId'
                        password='password';
                      saslMechanism: PLAIN
                      securityProtocol: SASL_SSL
                      seekTo: beginning
                    uri: kafka:lmolteni-prcs-b20329a0-9d94-4e7d-aa10-a5287cd979c5-httpAction
                - setBody:
                    simple: ${null}
          uri: rest:POST:example?exchangePattern=InOnly
    name: camel-k-embedded-flow.yaml
  image: 10.96.37.170/default/camel-k-kit-cbp5tpus1hn9g5luenng@sha256:b5287e016f29f5eb5845cb7e55e939032e4ce2ea3b24542cb32568d5fafb1370
  integrationKit:
    name: kit-cbp5tpus1hn9g5luenng
    namespace: default
  lastInitTimestamp: "2022-08-09T15:11:03Z"
  phase: Running
  profile: Kubernetes
  replicas: 1
  runtimeProvider: quarkus
  runtimeVersion: 1.13.0
  selector: camel.apache.org/integration=ob-camel-b20329a0-9d94-4e7d-aa10-a5287cd979c5
  version: 1.9.2
