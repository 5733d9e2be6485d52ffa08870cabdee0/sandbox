apiVersion: camel.apache.org/v1
kind: Integration
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"camel.apache.org/v1","kind":"Integration","metadata":{"annotations":{},"creationTimestamp":"2022-08-05T09:30:22Z","generation":13,"labels":{"app.kubernetes.io/created-by":"bridge-fleet-shard-operator","app.kubernetes.io/managed-by":"bridge-fleet-shard-operator"},"name":"ob-camel-01cb5bb5-511b-40d8-b43c-a5e29953f102","namespace":"ob-1608dc1f-4139-49c5-ae22-afe73ed807d7","resourceVersion":"271436","uid":"f9e68d11-3110-4e29-98c6-bdcdc20893a5"},"spec":{"flows":[{"from":{"steps":[{"to":"log:info?showAll=true\u0026multiLine=true"},{"unmarshal":{"json":{}}},{"to":"log:info?showAll=true\u0026multiLine=true"},{"choice":{"otherwise":{"steps":[{"marshal":{"json":{}}},{"to":{"parameters":{"brokers":"brokerUrl:443","consumersCount":1,"groupId":"kafkaGroup","maxPollRecords":5000,"saslJaasConfig":"org.apache.kafka.common.security.plain.PlainLoginModule required username='clientId' password='password';","saslMechanism":"PLAIN","securityProtocol":"SASL_SSL","seekTo":"beginning"},"uri":"kafka:lmolteni-prcs-01cb5bb5-511b-40d8-b43c-a5e29953f102-errorAction"}}]},"when":[{"simple":"${body[data][nutritions][sugar]} \u003c= 5","steps":[{"log":{"message":"++++- Lesser equal than 5 ${body}"}},{"marshal":{"json":{}}},{"to":{"parameters":{"brokers":"brokerUrl:443","consumersCount":1,"groupId":"kafkaGroup","maxPollRecords":5000,"saslJaasConfig":"org.apache.kafka.common.security.plain.PlainLoginModule required username='clientId' password='password';","saslMechanism":"PLAIN","securityProtocol":"SASL_SSL","seekTo":"beginning"},"uri":"kafka:lmolteni-prcs-01cb5bb5-511b-40d8-b43c-a5e29953f102-slackAction1"}}]},{"simple":"${body[data][nutritions][sugar]} \u003e 5 \u0026\u0026 ${body[nutritions][sugar]} \u003c= 10","steps":[{"log":{"message":"++++- between 5 and 10 goes to http ${body}"}},{"marshal":{"json":{}}},{"to":{"parameters":{"brokers":"brokerUrl:443","consumersCount":1,"groupId":"kafkaGroup","maxPollRecords":5000,"saslJaasConfig":"org.apache.kafka.common.security.plain.PlainLoginModule required username='clientId' password='password';","saslMechanism":"PLAIN","securityProtocol":"SASL_SSL","seekTo":"beginning"},"uri":"kafka:lmolteni-prcs-01cb5bb5-511b-40d8-b43c-a5e29953f102-httpAction"}}]}]}}],"uri":"rest:POST:example"}}]},"status":{"conditions":[{"firstTruthyTime":"2022-08-05T15:22:02Z","lastTransitionTime":"2022-08-05T15:22:02Z","lastUpdateTime":"2022-08-05T15:22:02Z","message":"kit-cbmhjims1hn8cqehpt7g","reason":"IntegrationKitAvailable","status":"True","type":"IntegrationKitAvailable"},{"lastTransitionTime":"2022-08-05T15:22:02Z","lastUpdateTime":"2022-08-05T15:22:02Z","message":"different controller strategy used (deployment)","reason":"CronJobNotAvailableReason","status":"False","type":"CronJobAvailable"},{"firstTruthyTime":"2022-08-05T15:22:02Z","lastTransitionTime":"2022-08-05T15:22:02Z","lastUpdateTime":"2022-08-05T15:22:02Z","message":"deployment name is ob-camel-01cb5bb5-511b-40d8-b43c-a5e29953f102","reason":"DeploymentAvailable","status":"True","type":"DeploymentAvailable"},{"firstTruthyTime":"2022-08-05T15:22:02Z","lastTransitionTime":"2022-08-05T15:22:02Z","lastUpdateTime":"2022-08-05T15:22:02Z","message":"ob-camel-01cb5bb5-511b-40d8-b43c-a5e29953f102(http/80) -\u003e integration(http/8080)","reason":"ServiceAvailable","status":"True","type":"ServiceAvailable"},{"lastTransitionTime":"2022-08-05T15:22:02Z","lastUpdateTime":"2022-08-05T15:22:02Z","message":"no host or service defined","reason":"IngressNotAvailable","status":"False","type":"ExposureAvailable"},{"firstTruthyTime":"2022-08-05T15:22:04Z","lastTransitionTime":"2022-08-05T15:22:04Z","lastUpdateTime":"2022-08-05T15:22:04Z","message":"1/1 ready replicas","reason":"DeploymentReady","status":"True","type":"Ready"}],"dependencies":["camel:core","camel:jackson","camel:kafka","camel:rest","mvn:org.apache.camel.k:camel-k-runtime","mvn:org.apache.camel.quarkus:camel-quarkus-yaml-dsl"],"digest":"vkqjbvBRIV6KaLbkj6EGd3OR_ATBd9Bz9qvGJg9tqTi0","generatedSources":[{"content":"- from:\n    steps:\n    - log:\n        message: before unmarshal ${body}\n    - unmarshal:\n        json: {}\n    - log:\n        message: after unmarshal ${body}\n    - choice:\n        otherwise:\n          steps:\n          - marshal:\n              json: {}\n          - to:\n              parameters:\n                brokers: brokerUrl:443\n                consumersCount: 1\n                groupId: kafkaGroup\n                maxPollRecords: 5000\n                saslJaasConfig: org.apache.kafka.common.security.plain.PlainLoginModule\n                  required username='clientId'\n                  password='password';\n                saslMechanism: PLAIN\n                securityProtocol: SASL_SSL\n                seekTo: beginning\n              uri: kafka:lmolteni-prcs-01cb5bb5-511b-40d8-b43c-a5e29953f102-errorAction\n        when:\n        - simple: ${body[data][nutritions][sugar]} \u003c= 5\n          steps:\n          - log:\n              message: ++++- Lesser equal than 5 ${body}\n          - marshal:\n              json: {}\n          - to:\n              parameters:\n                brokers: brokerUrl:443\n                consumersCount: 1\n                groupId: kafkaGroup\n                maxPollRecords: 5000\n                saslJaasConfig: org.apache.kafka.common.security.plain.PlainLoginModule\n                  required username='clientId'\n                  password='password';\n                saslMechanism: PLAIN\n                securityProtocol: SASL_SSL\n                seekTo: beginning\n              uri: kafka:lmolteni-prcs-01cb5bb5-511b-40d8-b43c-a5e29953f102-slackAction1\n        - simple: ${body[data][nutritions][sugar]} \u003e 5 \u0026\u0026 ${body[nutritions][sugar]}\n            \u003c= 10\n          steps:\n          - log:\n              message: ++++- between 5 and 10 goes to http ${body}\n          - marshal:\n              json: {}\n          - to:\n              parameters:\n                brokers: brokerUrl:443\n                consumersCount: 1\n                groupId: kafkaGroup\n                maxPollRecords: 5000\n                saslJaasConfig: org.apache.kafka.common.security.plain.PlainLoginModule\n                  required username='clientId'\n                  password='password';\n                saslMechanism: PLAIN\n                securityProtocol: SASL_SSL\n                seekTo: beginning\n              uri: kafka:lmolteni-prcs-01cb5bb5-511b-40d8-b43c-a5e29953f102-httpAction\n    uri: rest:POST:example\n","name":"camel-k-embedded-flow.yaml"}],"image":"10.96.37.170/default/camel-k-kit-cbmhjims1hn8cqehpt7g@sha256:e10070766413e1d0a4911586af938ce5b7ae92aaa2ae4eb45386097ff5ff70b8","integrationKit":{"name":"kit-cbmhjims1hn8cqehpt7g","namespace":"default"},"lastInitTimestamp":"2022-08-05T15:22:02Z","phase":"Running","profile":"Kubernetes","replicas":1,"runtimeProvider":"quarkus","runtimeVersion":"1.13.0","selector":"camel.apache.org/integration=ob-camel-01cb5bb5-511b-40d8-b43c-a5e29953f102","version":"1.9.2"}}
  creationTimestamp: "2022-08-05T09:30:22Z"
  generation: 14
  labels:
    app.kubernetes.io/created-by: bridge-fleet-shard-operator
    app.kubernetes.io/managed-by: bridge-fleet-shard-operator
  name: ob-camel-01cb5bb5-511b-40d8-b43c-a5e29953f102
  namespace: ob-1608dc1f-4139-49c5-ae22-afe73ed807d7
  resourceVersion: "273440"
  uid: f9e68d11-3110-4e29-98c6-bdcdc20893a5
spec:
  flows:
  - from:
      steps:
      - to: log:info?showAll=true&multiLine=true
      - unmarshal:
          json: {}
      - to: log:info?showAll=true&multiLine=true
      - choice:
          otherwise:
            steps:
            - marshal:
                json: {}
            - to:
                parameters:
                  brokers: brokerUrl:443
                  consumersCount: 1
                  groupId: kafkaGroup
                  maxPollRecords: 5000
                  saslJaasConfig: org.apache.kafka.common.security.plain.PlainLoginModule
                    required username='clientId'
                    password='password';
                  saslMechanism: PLAIN
                  securityProtocol: SASL_SSL
                  seekTo: beginning
                uri: kafka:lmolteni-prcs-01cb5bb5-511b-40d8-b43c-a5e29953f102-errorAction
          when:
          - simple: ${body[data][nutritions][sugar]} <= 5
            steps:
            - log:
                message: ++++- Lesser equal than 5 ${body}
            - marshal:
                json: {}
            - to:
                parameters:
                  brokers: brokerUrl:443
                  consumersCount: 1
                  groupId: kafkaGroup
                  maxPollRecords: 5000
                  saslJaasConfig: org.apache.kafka.common.security.plain.PlainLoginModule
                    required username='clientId'
                    password='password';
                  saslMechanism: PLAIN
                  securityProtocol: SASL_SSL
                  seekTo: beginning
                uri: kafka:lmolteni-prcs-01cb5bb5-511b-40d8-b43c-a5e29953f102-slackAction1
          - simple: ${body[data][nutritions][sugar]} > 5 && ${body[nutritions][sugar]}
              <= 10
            steps:
            - log:
                message: ++++- between 5 and 10 goes to http ${body}
            - marshal:
                json: {}
            - to:
                parameters:
                  brokers: brokerUrl:443
                  consumersCount: 1
                  groupId: kafkaGroup
                  maxPollRecords: 5000
                  saslJaasConfig: org.apache.kafka.common.security.plain.PlainLoginModule
                    required username='clientId'
                    password='password';
                  saslMechanism: PLAIN
                  securityProtocol: SASL_SSL
                  seekTo: beginning
                uri: kafka:lmolteni-prcs-01cb5bb5-511b-40d8-b43c-a5e29953f102-httpAction
      uri: rest:POST:example
status:
  conditions:
  - firstTruthyTime: "2022-08-05T15:26:50Z"
    lastTransitionTime: "2022-08-05T15:26:50Z"
    lastUpdateTime: "2022-08-05T15:26:50Z"
    message: kit-cbmjdbes1hn8cqehpta0
    reason: IntegrationKitAvailable
    status: "True"
    type: IntegrationKitAvailable
  - lastTransitionTime: "2022-08-05T15:26:50Z"
    lastUpdateTime: "2022-08-05T15:26:50Z"
    message: different controller strategy used (deployment)
    reason: CronJobNotAvailableReason
    status: "False"
    type: CronJobAvailable
  - firstTruthyTime: "2022-08-05T15:26:50Z"
    lastTransitionTime: "2022-08-05T15:26:50Z"
    lastUpdateTime: "2022-08-05T15:26:50Z"
    message: deployment name is ob-camel-01cb5bb5-511b-40d8-b43c-a5e29953f102
    reason: DeploymentAvailable
    status: "True"
    type: DeploymentAvailable
  - firstTruthyTime: "2022-08-05T15:26:50Z"
    lastTransitionTime: "2022-08-05T15:26:50Z"
    lastUpdateTime: "2022-08-05T15:26:50Z"
    message: ob-camel-01cb5bb5-511b-40d8-b43c-a5e29953f102(http/80) -> integration(http/8080)
    reason: ServiceAvailable
    status: "True"
    type: ServiceAvailable
  - lastTransitionTime: "2022-08-05T15:26:50Z"
    lastUpdateTime: "2022-08-05T15:26:50Z"
    message: no host or service defined
    reason: IngressNotAvailable
    status: "False"
    type: ExposureAvailable
  - firstTruthyTime: "2022-08-05T15:26:52Z"
    lastTransitionTime: "2022-08-05T15:26:52Z"
    lastUpdateTime: "2022-08-05T15:26:52Z"
    message: 1/1 ready replicas
    reason: DeploymentReady
    status: "True"
    type: Ready
  dependencies:
  - camel:core
  - camel:jackson
  - camel:kafka
  - camel:log
  - camel:rest
  - mvn:org.apache.camel.k:camel-k-runtime
  - mvn:org.apache.camel.quarkus:camel-quarkus-yaml-dsl
  digest: vDQ_zo_zxSZn18_9RcqwHMxzZrKITfC824saZMmQNW_4
  generatedSources:
  - content: |
      - from:
          steps:
          - to: log:info?showAll=true&multiLine=true
          - unmarshal:
              json: {}
          - to: log:info?showAll=true&multiLine=true
          - choice:
              otherwise:
                steps:
                - marshal:
                    json: {}
                - to:
                    parameters:
                      brokers: brokerUrl:443
                      consumersCount: 1
                      groupId: kafkaGroup
                      maxPollRecords: 5000
                      saslJaasConfig: org.apache.kafka.common.security.plain.PlainLoginModule
                        required username='clientId'
                        password='password';
                      saslMechanism: PLAIN
                      securityProtocol: SASL_SSL
                      seekTo: beginning
                    uri: kafka:lmolteni-prcs-01cb5bb5-511b-40d8-b43c-a5e29953f102-errorAction
              when:
              - simple: ${body[data][nutritions][sugar]} <= 5
                steps:
                - log:
                    message: ++++- Lesser equal than 5 ${body}
                - marshal:
                    json: {}
                - to:
                    parameters:
                      brokers: brokerUrl:443
                      consumersCount: 1
                      groupId: kafkaGroup
                      maxPollRecords: 5000
                      saslJaasConfig: org.apache.kafka.common.security.plain.PlainLoginModule
                        required username='clientId'
                        password='password';
                      saslMechanism: PLAIN
                      securityProtocol: SASL_SSL
                      seekTo: beginning
                    uri: kafka:lmolteni-prcs-01cb5bb5-511b-40d8-b43c-a5e29953f102-slackAction1
              - simple: ${body[data][nutritions][sugar]} > 5 && ${body[nutritions][sugar]}
                  <= 10
                steps:
                - log:
                    message: ++++- between 5 and 10 goes to http ${body}
                - marshal:
                    json: {}
                - to:
                    parameters:
                      brokers: brokerUrl:443
                      consumersCount: 1
                      groupId: kafkaGroup
                      maxPollRecords: 5000
                      saslJaasConfig: org.apache.kafka.common.security.plain.PlainLoginModule
                        required username='clientId'
                        password='password';
                      saslMechanism: PLAIN
                      securityProtocol: SASL_SSL
                      seekTo: beginning
                    uri: kafka:lmolteni-prcs-01cb5bb5-511b-40d8-b43c-a5e29953f102-httpAction
          uri: rest:POST:example
    name: camel-k-embedded-flow.yaml
  image: 10.96.37.170/default/camel-k-kit-cbmjdbes1hn8cqehpta0@sha256:ab1da789815ce0c59b27f960be5ae576eea75e1ceb2a5e644656933329c57b8c
  integrationKit:
    name: kit-cbmjdbes1hn8cqehpta0
    namespace: default
  lastInitTimestamp: "2022-08-05T15:26:37Z"
  phase: Running
  profile: Kubernetes
  replicas: 1
  runtimeProvider: quarkus
  runtimeVersion: 1.13.0
  selector: camel.apache.org/integration=ob-camel-01cb5bb5-511b-40d8-b43c-a5e29953f102
  version: 1.9.2
